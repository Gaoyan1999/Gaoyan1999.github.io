<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker 随笔 | DanielGao&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Hello World">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.84cbfe9a.js" as="script"><link rel="preload" href="/assets/js/2.97ad032c.js" as="script"><link rel="preload" href="/assets/js/17.24a22417.js" as="script"><link rel="prefetch" href="/assets/js/10.6f6050b0.js"><link rel="prefetch" href="/assets/js/11.314a169a.js"><link rel="prefetch" href="/assets/js/12.44c5ee57.js"><link rel="prefetch" href="/assets/js/13.f2574ab5.js"><link rel="prefetch" href="/assets/js/14.9878853c.js"><link rel="prefetch" href="/assets/js/15.6fb7ebac.js"><link rel="prefetch" href="/assets/js/16.0ad1fc40.js"><link rel="prefetch" href="/assets/js/18.f1919206.js"><link rel="prefetch" href="/assets/js/19.25662fd9.js"><link rel="prefetch" href="/assets/js/3.60832a0f.js"><link rel="prefetch" href="/assets/js/4.e7c996f5.js"><link rel="prefetch" href="/assets/js/5.6eff8140.js"><link rel="prefetch" href="/assets/js/6.17d5dd20.js"><link rel="prefetch" href="/assets/js/7.e59ee139.js"><link rel="prefetch" href="/assets/js/8.7162edc7.js"><link rel="prefetch" href="/assets/js/9.67af75ac.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DanielGao's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Back End
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/back_end/docker_command.html" class="nav-link">
  Docker 命令
</a></li><li class="dropdown-subitem"><a href="/back_end/docker_jottings.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Docker 随笔
</a></li><li class="dropdown-subitem"><a href="/back_end/Kubernetes.html" class="nav-link">
  K8S
</a></li><li class="dropdown-subitem"><a href="/back_end/redis_start.html" class="nav-link">
  Redis Start
</a></li></ul></li><li class="dropdown-item"><h4>
          Algorithm notes
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/basic_template.html" class="nav-link">
  常用算法模板
</a></li><li class="dropdown-subitem"><a href="/algorithm/PAT.html" class="nav-link">
  PAT tips
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便写写" class="dropdown-title"><span class="title">随便写写</span> <span class="arrow down"></span></button> <button type="button" aria-label="随便写写" class="mobile-dropdown-title"><span class="title">随便写写</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jottings/introduction.html" class="nav-link">
  前言
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Gaoyan1999" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="学习笔记" class="dropdown-title"><span class="title">学习笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="学习笔记" class="mobile-dropdown-title"><span class="title">学习笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Back End
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/back_end/docker_command.html" class="nav-link">
  Docker 命令
</a></li><li class="dropdown-subitem"><a href="/back_end/docker_jottings.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  Docker 随笔
</a></li><li class="dropdown-subitem"><a href="/back_end/Kubernetes.html" class="nav-link">
  K8S
</a></li><li class="dropdown-subitem"><a href="/back_end/redis_start.html" class="nav-link">
  Redis Start
</a></li></ul></li><li class="dropdown-item"><h4>
          Algorithm notes
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/algorithm/basic_template.html" class="nav-link">
  常用算法模板
</a></li><li class="dropdown-subitem"><a href="/algorithm/PAT.html" class="nav-link">
  PAT tips
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="随便写写" class="dropdown-title"><span class="title">随便写写</span> <span class="arrow down"></span></button> <button type="button" aria-label="随便写写" class="mobile-dropdown-title"><span class="title">随便写写</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/jottings/introduction.html" class="nav-link">
  前言
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/Gaoyan1999" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Docker 随笔</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/back_end/docker_jottings.html#容器化及其优势" class="sidebar-link">容器化及其优势</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/back_end/docker_jottings.html#docker" class="sidebar-link">Docker</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/back_end/docker_jottings.html#docker容器如何做到资源的隔离" class="sidebar-link">Docker容器如何做到资源的隔离？</a></li><li class="sidebar-sub-header"><a href="/back_end/docker_jottings.html#docker-镜像" class="sidebar-link">docker 镜像</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="docker-随笔"><a href="#docker-随笔" class="header-anchor">#</a> Docker 随笔</h1> <h2 id="容器化及其优势"><a href="#容器化及其优势" class="header-anchor">#</a> 容器化及其优势</h2> <p>容器虚拟化（操作系统级虚拟化）能够使多个用户空间在同一个宿主机跑。</p> <p>这样我们不但可以充分利用资源，而且由于每个用户空间是隔离的，那么当有一个用户出现卡死的状况不会导致在同一个宿主机上运行的其他用户空间出现问题。同时，权限隔离监牢创建了一个隔离的目录环境来运行进程，那么如果监牢中存在入侵者，入侵者也会犹豫权限不足被困在容器创建的目录下，从而保护宿主机不被破坏。</p> <ul><li><p>模块化</p> <p>支持了在不停下整个应用的情况下，对某些模块进行更新和修复。</p></li> <li><p>层和版本控制</p> <p>Docker 的镜像文件都是由多个层组成的，这些组合在一起就会构成一个镜像，当某个层发生变化那么就会有新的镜像产生。</p></li> <li><p>回滚</p> <p>如果你不喜欢迭代后的新镜像，那么可以回滚镜像。该功能支持了CI/CD</p></li> <li><p>快速部署</p> <p>基于镜像的容器可以把部署时间缩短到几秒</p></li></ul> <h2 id="docker"><a href="#docker" class="header-anchor">#</a> Docker</h2> <blockquote><p>一个可以把你的代码自动部署到容器里的牛逼引擎</p></blockquote> <h3 id="docker容器如何做到资源的隔离"><a href="#docker容器如何做到资源的隔离" class="header-anchor">#</a> Docker容器如何做到资源的隔离？</h3> <p>容器的目的所在就是在一个物理机上运行多种进程，多个应用。Docker 用了Linux 中的Cgroups 和namespaces 分割进程。</p> <h3 id="docker-镜像"><a href="#docker-镜像" class="header-anchor">#</a> docker 镜像</h3> <p>docker 镜像是由文件叠加而成的，最底层是一个引导文件 bootfs，第二层是rootfs，rootfs可以是一种或多种os。在传动linux中，root文件系统已开始以只读的方式加载，引导结束后变成读写状态，而docker只是已读状态。</p> <p>Docker 会使用联合加载技术同时加载多个文件，联合加载会把各层文件系统叠加到一起，外面看就是一个文件系统。</p> <p><img src="https://gaoyan1999.oss-cn-beijing.aliyuncs.com/md/2021-05-29-174817.png" alt="截屏2021-05-30 上午1.32.12"></p> <p>由图可以看出，镜像层不支持写操作，而容器层可写。每当我们创建一个容器时，docker 先构建一个镜像栈，在栈顶在构建一个读写层，那么在加上一些配置后一个可用容器就诞生了。</p> <blockquote><p>写时复制</p></blockquote> <p>docker 另一个nb之处是写时复制，如果想要改动一个文件，这个文件会从只读层<strong>复制</strong>到读写层，那么这个文件的改动前版本还是存在的，读写层的只是它的副本而已。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>To be continue……</p></div></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.84cbfe9a.js" defer></script><script src="/assets/js/2.97ad032c.js" defer></script><script src="/assets/js/17.24a22417.js" defer></script>
  </body>
</html>
